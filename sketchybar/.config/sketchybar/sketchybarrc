#!/usr/bin/env bash

export CONFIG_DIR="${XDG_CONFIG_HOME:-$HOME/.config}/sketchybar"
export PLUGIN_DIR="$CONFIG_DIR/plugins"
ITEM_DIR="$CONFIG_DIR/items"

# Ensure Homebrew apps (e.g. aerospace) are found when sketchybar is started by launchd
export PATH="/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:${PATH}"

source "$CONFIG_DIR/settings.sh"

sketchybar --bar "${bar[@]}" --default "${default[@]}"

# --- Left Side Items ---
source "$ITEM_DIR/spaces.sh"
source "$ITEM_DIR/front_app.sh"

# --- Right Side Items ---
source "$ITEM_DIR/clock.sh"
source "$ITEM_DIR/wifi.sh"
source "$ITEM_DIR/network.sh"
source "$ITEM_DIR/battery.sh"
source "$ITEM_DIR/storage.sh"
source "$ITEM_DIR/cpu.sh"
source "$ITEM_DIR/ram.sh"

sketchybar --hotload on
sketchybar --update
